
# vi: filetype=tmux

# Restore default key-bindings
source-file ~/.tmux/key-bindings.default.conf

# ============
#    PREFIX
# ============
set-option -g prefix C-a
bind-key C-a send-prefix
unbind-key C-b


# ============
#    CLIENT
# ============

# Detach Client <Ctrl-n>
bind-key -n C-q detach-client


# =============
#    SESSION
# =============

# --- Session Shortcuts ---

# Choose Session <M-a>
bind-key -n M-a choose-session

# Switch Sessions <Alt-Shift-Direction>
bind-key -n M-J switch-client -n
bind-key -n M-K switch-client -p

# Switch to Last Session <M-_>
bind-key -n M-_ switch-client -l

# Rename Session <Ctrl-R>
#bind-key -n C-R command-prompt 'rename-session %%'
#bind-key -n C-S-R command-prompt 'rename-session %%'


# =============
#    WINDOWS
# =============

# --- Window Shortcuts ---

# New Window <Alt-Shift-N>
bind-key -n M-N new-window -c '#{pane_current_path}'

# Switch Windows <Alt-Shift-Direction>
bind-key -n M-H previous-window
bind-key -n M-L     next-window

# Swap Windows <Alt-Shift-Arrow>
bind-key -n S-M-Left  swap-window -t -1
bind-key -n S-M-Right swap-window -t +1

# Close Window <Alt-Shift-W>
#bind-key -n M-W confirm-before -p "kill-window #W? (y/n)" kill-window
bind-key -n M-W kill-window

# Rename Window <Ctrl-r>
bind-key -n M-r command-prompt 'rename-window %%'

# Select Windows <Alt-#>
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9
bind-key -n M-0 select-window -t 10

# Switch to Last Window <M-->
bind-key -n M-- select-window -l


# ===========
#    PANES
# ===========

# --- New Pane <Alt-s/v> ---
bind-key -n M-v split-window -h -c '#{pane_current_path}'
bind-key -n M-s split-window -v -c '#{pane_current_path}'

# --- New Pane <Prefix -|> ---
bind-key | split-window -h
bind-key - split-window -v

# --- Switch Panes <Alt-Direction> ---
# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
# Disabled because switching is too laggy
#tmux_select_pane_left=M-h
#tmux_select_pane_right=M-l
#tmux_select_pane_up=M-k
#tmux_select_pane_down=M-j
#tmux_select_pane_last=M--
#is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
#bind-key -n $tmux_select_pane_left if-shell "$is_vim" "send-keys $tmux_select_pane_left" "select-pane -L"
#bind-key -n $tmux_select_pane_right if-shell "$is_vim" "send-keys $tmux_select_pane_right" "select-pane -R"
#bind-key -n $tmux_select_pane_up if-shell "$is_vim" "send-keys $tmux_select_pane_up" "select-pane -U"
#bind-key -n $tmux_select_pane_down if-shell "$is_vim" "send-keys $tmux_select_pane_down" "select-pane -D"
#bind-key -n $tmux_select_pane_last if-shell "$is_vim" "send-keys $tmux_select_pane_last" "select-pane -l"
bind-key -n M-k select-pane -U
bind-key -n M-j select-pane -D
bind-key -n M-h select-pane -L
bind-key -n M-l select-pane -R

# --- Resize Pane <Alt-Arrow> ---
bind-key -n M-Left  resize-pane -L
bind-key -n M-Right resize-pane -R
bind-key -n M-Up    resize-pane -U
bind-key -n M-Down  resize-pane -D

# --- Zoom Pane <Alt-f> ---
bind-key -n M-f resize-pane -Z

# --- Swap Panes <Alt-page up/down> ---
bind-key -n M-PPage swap-pane -U
bind-key -n M-NPage swap-pane -D

# --- Close Pane <Alt-w> ---
#bind-key -n M-w confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind-key -n M-w kill-pane


# ==================
#    COPY-MODE-VI
# ==================
source-file ~/.tmux/key-bindings.copy-mode-vi.conf


# ===========
#    MOUSE
# ===========
source-file ~/.tmux/key-bindings.mouse.conf


# ==========
#    MISC
# ==========

# Reload .tmux.conf <C-F5>
bind-key -n C-F5 source-file ~/.tmux.conf

# Command prompt
bind-key Enter command-prompt



set-option -g prefix ^^ #C-`
bind-key ^^ send-prefix # C-`
bind-key    -T copy-mode    C-r	       command-prompt -i -p "search up" "send -X search-backward-incremental \"%%%\""
bind-key    -T copy-mode    C-s	       command-prompt -i -p "search down" "send -X search-forward-incremental \"%%%\""
bind-key    -T copy-mode    F		       command-prompt -1 -p "jump backward" "send -X jump-backward \"%%%\""
bind-key    -T copy-mode    T		       command-prompt -1 -p "jump to backward" "send -X jump-to-backward \"%%%\""
bind-key    -T copy-mode    f		       command-prompt -1 -p "jump forward" "send -X jump-forward \"%%%\""
bind-key    -T copy-mode    g		       command-prompt -p "goto line" "send -X goto-line \"%%%\""
bind-key    -T copy-mode    t		       command-prompt -1 -p "jump to forward" "send -X jump-to-forward \"%%%\""
bind-key    -T copy-mode    M-1	       command-prompt -N -I 1 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-2	       command-prompt -N -I 2 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-3	       command-prompt -N -I 3 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-4	       command-prompt -N -I 4 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-5	       command-prompt -N -I 5 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-6	       command-prompt -N -I 6 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-7	       command-prompt -N -I 7 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-8	       command-prompt -N -I 8 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode    M-9	       command-prompt -N -I 9 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi C-j	       send-keys -X copy-selection-and-cancel
bind-key    -T copy-mode-vi /		       command-prompt -p "search down" "send -X search-forward \"%%%\""
bind-key    -T copy-mode-vi 1		       command-prompt -N -I 1 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 2		       command-prompt -N -I 2 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 3		       command-prompt -N -I 3 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 4		       command-prompt -N -I 4 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 5		       command-prompt -N -I 5 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 6		       command-prompt -N -I 6 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 7		       command-prompt -N -I 7 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 8		       command-prompt -N -I 8 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi 9		       command-prompt -N -I 9 -p repeat "send -N \"%%%\""
bind-key    -T copy-mode-vi :		       command-prompt -p "goto line" "send -X goto-line \"%%%\""
bind-key    -T copy-mode-vi ?		       command-prompt -p "search up" "send -X search-backward \"%%%\""
bind-key    -T copy-mode-vi F		       command-prompt -1 -p "jump backward" "send -X jump-backward \"%%%\""
bind-key    -T copy-mode-vi T		       command-prompt -1 -p "jump to backward" "send -X jump-to-backward \"%%%\""
bind-key    -T copy-mode-vi f		       command-prompt -1 -p "jump forward" "send -X jump-forward \"%%%\""
bind-key    -T copy-mode-vi t		       command-prompt -1 -p "jump to forward" "send -X jump-to-forward \"%%%\""
bind-key    -T prefix	     C-n	       next-window
bind-key    -T prefix	     C-p	       previous-window
bind-key    -T prefix	     C-^	       send-prefix
bind-key    -T prefix	     ,		       command-prompt -I "#W" "rename-window '%%'"
bind-key    -T prefix	     0		       select-window -t :0
bind-key    -T prefix	     1		       select-window -t :1
bind-key    -T prefix	     2		       select-window -t :2
bind-key    -T prefix	     3		       select-window -t :3
bind-key    -T prefix	     4		       select-window -t :4
bind-key    -T prefix	     5		       select-window -t :5
bind-key    -T prefix	     6		       select-window -t :6
bind-key    -T prefix	     7		       select-window -t :7
bind-key    -T prefix	     8		       select-window -t :8
bind-key    -T prefix	     9		       select-window -t :9
bind-key    -T prefix	     =		       choose-buffer
bind-key    -T prefix	     D		       choose-client
bind-key    -T prefix	     W		       kill-window
bind-key    -T prefix	     ^		       last-window
bind-key    -T prefix	     f		       command-prompt "find-window '%%'"
bind-key    -T prefix	     s		       choose-session
bind-key    -T prefix	     w		       kill-pane
bind-key    -T prefix	     F11	       next-layout
bind-key -r -T prefix	     M-1	       select-layout even-horizontal
bind-key -r -T prefix	     M-2	       select-layout even-vertical
bind-key -r -T prefix	     M-3	       select-layout main-horizontal
bind-key -r -T prefix	     M-4	       select-layout main-vertical
bind-key -r -T prefix	     M-5	       select-layout tiled
bind-key -r -T prefix	     M-n	       next-window -a
bind-key -r -T prefix	     M-o	       rotate-window -D
bind-key -r -T prefix	     M-p	       previous-window -a
bind-key    -T root	     C-p	       choose-buffer "paste-buffer -b %%"
bind-key    -T root	     Home	       send-keys C-a
bind-key    -T root	     End	       send-keys C-e
bind-key    -T root	     M-=	       resize-pane -Z
bind-key    -T root	     M-_	       select-window -l
bind-key    -T root	     M-y	       run-shell "tmux capture-pane -p | /home/jimcum01/.tmux/plugins/tmux-fingers/scripts/tmux-fingers.sh"
bind-key    -T root	     M-Up	       select-pane -U
bind-key    -T root	     M-Down	       select-pane -D
bind-key    -T root	     M-Left	       select-pane -L
bind-key    -T root	     M-Right	       select-pane -R
bind-key    -T root	     C-PPage	       copy-mode
bind-key    -T root	     M-S-Left	       previous-window
bind-key    -T root	     M-S-Right	       next-window


